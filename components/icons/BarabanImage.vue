<template>
    <div class="baraban-image">

            <div id="baraban" >
              <!-- Generator: Adobe Illustrator 23.1.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
              <svg version="1.1" id="Layer1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
                   viewBox="0 0 139 139" style="enable-background:new 0 0 139 139;" xml:space="preserve">

                <g>
	<g>
      <g  id="_x0020_1">
        <path id="cone-3" class="cone-3" d="M69.4,0.5C31.3,0.5,0.5,31.3,0.5,69.4h68.9V0.5z"/>
        <path id="cone-0" class="cone-0" d="M0.5,69.4c0,38.1,30.8,68.9,68.9,68.9V69.4H0.5z"/>
        <path id="cone-1" class="cone-1" d="M69.4,138.3c38.1,0,68.9-30.8,68.9-68.9H69.4V138.3z"/>
        <path id="cone-2" class="cone-2" d="M138.3,69.4c0-38.1-30.8-68.9-68.9-68.9v68.9H138.3z"/>
      </g>
    <g id="_2214054094752">
			<g>
				<path class="st5" d="M35,48c0.5,0.4,0.8,0.9,1.2,1.3s0.8,0.3,1.1,0.1c2.5-2.4,5-3.4,8-3.4c0.4,0,0.8-0.3,0.8-0.8
					c0.1-3,1.3-5.5,3.8-7.9c0.4-0.4,0.4-0.9,0.1-1.1c-0.4-0.5-0.8-0.8-1.2-1.3c-3.9-4.2-9.2-10-18.4-5.7c-0.1,0-0.1,0.1-0.2,0.1
					c-0.1,0.1-0.1,0.1-0.2,0.2C25.5,38.4,31,43.9,35,48z M31.3,30.3c8-3.5,12.4,1.3,16.3,5.5c0.2,0.3,0.5,0.4,0.7,0.7
					c-2.2,2.3-3.4,4.8-3.6,7.6c-2.9,0.2-5.4,1.2-7.8,3.4c-0.2-0.3-0.5-0.4-0.7-0.7C32.1,42.8,27.5,38.2,31.3,30.3z"/>
        <path class="st5" d="M38.1,41.3l0.2-5.5l2.3,0.1c0.4,0,0.9-0.4,0.8-0.8c-0.1-0.4-0.3-0.9-0.8-0.8l-3.1-0.1
					c-0.2,0-0.4,0.1-0.6,0.2c-0.2,0.1-0.3,0.3-0.2,0.5l-0.2,6.3c0,0.4,0.3,0.9,0.8,0.8C37.7,42.1,38,41.7,38.1,41.3z"/>
			</g>
		</g>
    <g id="_2214054088256">
			<g>
				<path class="st5" d="M98.9,32.2l6.5,6.5l1.9-0.8l0.3-0.2l-1.2-1.3c0,0,0,0,0,0.1l-0.2,0.2l-0.4,0.5c-0.1,0.1-0.3,0.2-0.4,0
					c-0.1-0.1-0.2-0.3,0-0.4l0.4-0.4l0.2-0.3l0,0l-2-2l0,0l-0.2,0.3l-0.4,0.5c-0.1,0.1-0.3,0.1-0.4,0c-0.1-0.1-0.2-0.3,0-0.4
					l0.4-0.5l0.2-0.2c0,0,0,0,0-0.1l-2-2c0,0,0,0,0,0.1l-0.2,0.2l-0.4,0.5c-0.1,0.1-0.3,0.2-0.4,0s-0.2-0.3,0-0.4l0.4-0.5l0.2-0.2
					l0,0l-1.2-1.6l-0.2,0.4L98.9,32.2z"/>
        <path class="st5" d="M87.9,32.3c-0.1,0.2,0,0.4,0.1,0.5c0.5,0.6,1.1,1.1,1.6,1.6c0.1,0.1,0.4,0.2,0.5,0.1
					c0.2-0.1,0.4-0.2,0.6-0.3c-0.6,2.1-1.3,4.5-1.3,4.5c-0.1,0.3-0.1,0.7,0.1,0.9c1.2,1.8,2.5,3.4,4.1,4.8c1.4,1.4,3.1,2.9,4.9,4
					c0.3,0.1,0.6,0.2,0.9,0c0,0,2.3-0.8,4.4-1.4c-0.1,0.2-0.3,0.4-0.4,0.6c-0.1,0.2-0.1,0.4,0.1,0.5c0.5,0.6,1.1,1.1,1.6,1.6
					c0.1,0.1,0.4,0.2,0.5,0.1c0.7-0.3,1-0.6,1.2-1.2c0.1-0.2,0.1-0.4-0.1-0.5c-0.5-0.6-1.1-1.1-1.6-1.6c0,0,0-0.1,0.1-0.1
					c0.5,0.3,1,0.1,1.3-0.2l3.5-3.5l0.2-0.2l1.8-1.8c0.2-0.3,0.2-0.6,0-0.8l-2-2c-0.3-0.2-0.6-0.2-0.8,0l-0.9,1l-0.4-0.4l-2.4,1
					c-0.1,0.1-0.2,0.1-0.3,0l-6.8-6.8c-0.1-0.1-0.1-0.2-0.1-0.3l0.9-2.4l-0.4-0.4l0.9-1c0.2-0.3,0.2-0.6,0-0.8l-2-2
					c-0.3-0.2-0.6-0.2-0.8,0l-1.8,1.9L95,27.7l-3.5,3.5c-0.4,0.5-0.4,0.9-0.2,1.4c0,0,0,0.1-0.1,0.1c-0.5-0.6-1.1-1.1-1.6-1.6
					C89.5,31,89.2,30.9,89,31C88.4,31.3,88.2,31.6,87.9,32.3z M98.7,47c0,0-1.2-0.7-4.3-3.8c-3.1-3.1-3.7-4.3-3.7-4.3l2-4.9
					L103.5,45L98.7,47z M106.5,42.8l-1.2,1.1l-2.4-2.5l0.4-1.9L106.5,42.8z M94.9,31.2l3.2,3.2l-1.9,0.4l-2.5-2.5L94.9,31.2z"/>
			</g>
		</g>
    <g id="_2214054088352">
			<g>
				<path id="XMLID_680_" class="st5" d="M100.1,94.5c-0.2,0.1-0.3,0.4-0.2,0.6l0.7,2.2l-1.9,2.5l-3-0.9L95,96.7
					c-0.1-0.3-0.3-0.4-0.5-0.4c-0.2,0-0.5,0.1-0.5,0.3c-0.5,1.1-0.6,2.3-0.2,3.4c0.5,1.8,2.2,3.1,3.9,3.2l2.9,8.9
					c0.3,1.2,1.6,1.8,2.6,1.4c0.5-0.2,0.9-0.5,1.3-1c0.2-0.4,0.3-1.1,0.1-1.6l-2.9-8.9c1.2-1.2,1.7-3.1,1.2-4.9
					c-0.4-1.2-1.2-2.1-2.2-2.6C100.5,94.3,100.3,94.4,100.1,94.5z M103.3,110.7c0.1,0.5-0.1,0.9-0.6,1.2c-0.4,0.1-0.9-0.1-1.1-0.5
					c-0.1-0.5,0.1-0.9,0.6-1.2C102.6,109.9,103,110.2,103.3,110.7z"/>
        <path class="st5" d="M101.8,92.1c-3.8-1.9-8.3-0.3-10.2,3.5c-1.9,3.8-0.3,8.3,3.5,10.2c3.8,1.9,8.3,0.3,10.2-3.5
					C107.1,98.5,105.6,94,101.8,92.1z M95.5,105.1c-3.4-1.7-4.8-5.7-3.1-9.1c1.6-3.3,5.8-4.7,9.1-3.1c3.3,1.6,4.7,5.8,3.1,9.1
					C102.9,105.4,98.9,106.7,95.5,105.1z"/>
        <path class="st5" d="M109.3,101.9l-0.6-0.3c0.3-1.3,0.4-2.7,0.2-4l0.7-0.2c0.3-0.2,0.5-0.4,0.7-0.7c0.1-0.3,0.2-0.7,0.1-0.9
					l-0.5-1.6c-0.2-0.7-0.9-1-1.6-0.8l-0.7,0.2c-0.6-1.2-1.6-2.2-2.7-3.1l0.3-0.6c0.3-0.6,0.1-1.3-0.5-1.6l-1.5-0.8
					c-0.6-0.3-1.3-0.1-1.6,0.5l-0.3,0.6c-1.3-0.3-2.7-0.4-4.1-0.2l-0.2-0.7c-0.2-0.7-0.9-1-1.6-0.8l-1.6,0.5
					c-0.3,0.1-0.5,0.3-0.7,0.7c-0.1,0.3-0.2,0.6-0.1,0.9l0.2,0.7c-1.2,0.7-2.2,1.6-3.1,2.6l-0.6-0.3c-0.6-0.3-1.3,0-1.6,0.5
					l-0.8,1.5c-0.3,0.6,0,1.3,0.5,1.6l0.6,0.3c-0.3,1.3-0.4,2.7-0.2,4l-0.7,0.2c-0.7,0.2-1,0.9-0.8,1.6l0.5,1.6
					c0,0.4,0.3,0.6,0.6,0.8s0.7,0.2,1,0l0.7-0.2c0.7,1.1,1.6,2.2,2.7,3.1l-0.4,0.7c-0.3,0.6-0.1,1.3,0.5,1.6l1.5,0.8
					c0.6,0.3,1.3,0,1.6-0.5l0.3-0.6c1.3,0.3,2.7,0.4,4.1,0.2l0.2,0.7c0,0.4,0.3,0.6,0.6,0.8c0.4,0.2,0.7,0.2,1,0l1.6-0.5
					c0.7-0.2,1-0.9,0.8-1.6l-0.2-0.7c1.2-0.6,2.2-1.6,3.1-2.6l0.6,0.3c0.6,0.3,1.3,0,1.6-0.5l0.8-1.5
					C110.2,103,109.9,102.2,109.3,101.9z M108.4,104.8c-0.1,0.3-0.4,0.4-0.7,0.2l-0.9-0.4c-0.2-0.1-0.3,0-0.5,0.1
					c-0.8,1.2-2,2.2-3.3,2.8c-0.2,0.1-0.3,0.3-0.1,0.5l0.3,0.9c0.1,0.3,0,0.5-0.3,0.5l-1.6,0.5c-0.1,0-0.2,0-0.3,0
					c-0.1,0-0.1-0.2-0.2-0.2l-0.3-0.9c0-0.1-0.2-0.3-0.4-0.3c-1.5,0.3-3,0.1-4.3-0.2c-0.2-0.1-0.4,0-0.4,0.2l-0.4,0.9
					c-0.1,0.3-0.4,0.4-0.7,0.2l-1.5-0.8c-0.3-0.1-0.4-0.4-0.2-0.7l0.4-0.9c0.1-0.2,0.1-0.4-0.1-0.5c-1.3-0.8-2.2-2-2.8-3.3
					c0-0.1,0-0.1-0.1-0.2c-0.1,0-0.2-0.1-0.3,0l-0.9,0.3c-0.1,0-0.2,0-0.3,0c-0.1,0-0.1-0.2-0.2-0.2l-0.5-1.6
					c-0.1-0.3,0-0.5,0.3-0.5l0.9-0.3c0.1,0,0.3-0.2,0.3-0.4c-0.3-1.5-0.1-3,0.2-4.3c0-0.2,0-0.4-0.2-0.4l-0.9-0.4
					c-0.3-0.1-0.4-0.4-0.2-0.7l0.8-1.5c0.1-0.2,0.4-0.4,0.7-0.2l0.9,0.4c0.2,0.1,0.3,0,0.5-0.1c0.8-1.3,2-2.2,3.3-2.8
					c0.2-0.1,0.3-0.3,0.1-0.5L93.8,89c0-0.1,0-0.2,0-0.3c0-0.1,0.1-0.3,0.2-0.2l1.6-0.5c0.3-0.1,0.5,0,0.5,0.3l0.3,0.9
					c0,0.1,0.2,0.2,0.4,0.2c1.5-0.3,3-0.1,4.3,0.2c0.2,0.1,0.4,0,0.4-0.2l0.4-0.9c0.1-0.3,0.4-0.4,0.7-0.2l1.5,0.8
					c0.3,0.1,0.4,0.4,0.2,0.7l-0.4,0.9c-0.1,0.2,0,0.3,0.1,0.5c1.2,0.9,2.2,2,2.8,3.3c0.1,0.2,0.3,0.3,0.4,0.2l0.9-0.3
					c0.3-0.1,0.5,0,0.5,0.3l0.5,1.6c0,0.1,0,0.2,0,0.3c0,0.1-0.1,0.2-0.2,0.2l-0.9,0.3c-0.1,0-0.2,0.2-0.3,0.4
					c0.3,1.5,0.1,3-0.2,4.3c0,0.2,0,0.4,0.2,0.4l0.9,0.4c0.3,0.1,0.4,0.4,0.2,0.7L108.4,104.8L108.4,104.8z"/>
			</g>
      <path class="st6" d="M99.9,94.6c0,0.1-0.1,0-0.1,0.2c0,0.1,0,0.1,0,0.1l0.7,2.4l-2.1,2.7l-3.3-1l-0.7-2.4c0-0.1,0-0.1-0.1-0.2
				c-0.1,0-0.1,0-0.2-0.1c-0.1,0-0.1,0-0.1,0l0,0c-0.1,0-0.1,0-0.2,0.1c-0.3,0.5-0.4,1-0.4,1.6s0,1.1,0.2,1.7c0.3,0.8,0.8,1.5,1.4,2
				c0.6,0.5,1.4,0.9,2.3,1l0.1,0c1,3,2,6,2.9,9c0.1,0.5,0.5,0.8,0.9,1.1c0.4,0.2,0.9,0.2,1.4,0.1l0,0c0.3-0.1,0.4-0.2,0.6-0.4
				c0.2-0.1,0.3-0.4,0.4-0.6c0.1-0.3,0.2-0.4,0.2-0.7s0-0.4-0.1-0.7l-2.9-9l0.1,0c0.6-0.6,1-1.4,1.2-2.2c0.2-0.8,0.1-1.6-0.1-2.5
				c-0.2-0.5-0.5-1-0.7-1.5c-0.4-0.4-0.7-0.8-1.3-1.1c-0.1,0-0.1,0-0.2-0.1C100.1,94.5,100,94.6,99.9,94.6L99.9,94.6z M99.4,94.6
				c0.1-0.2,0.1-0.3,0.3-0.4l0,0c0.2-0.1,0.3-0.2,0.4-0.2s0.3,0,0.5,0.1c0.5,0.3,1,0.7,1.4,1.2c0.4,0.5,0.7,1,0.9,1.6
				c0.3,0.9,0.3,1.8,0.1,2.7c-0.2,0.9-0.6,1.7-1.2,2.3l2.8,8.7c0.1,0.3,0.1,0.6,0.1,0.9s-0.1,0.6-0.2,0.9s-0.4,0.5-0.6,0.7
				c-0.2,0.2-0.5,0.3-0.8,0.5l0,0c-0.7,0.2-1.3,0.1-1.8-0.1s-1-0.7-1.1-1.3c-1-2.9-1.9-5.8-2.9-8.7c-0.9-0.1-1.7-0.5-2.4-1.1
				c-0.7-0.6-1.2-1.4-1.5-2.3c-0.2-0.7-0.3-1.3-0.2-1.8c0-0.7,0.2-1.3,0.4-1.8c0.1-0.2,0.1-0.3,0.3-0.4l0,0c0.1,0,0.3-0.2,0.5-0.1
				c0.1,0,0.3,0,0.5,0.1c0.1,0,0.2,0.2,0.2,0.4l0.7,2.1l2.6,0.8l1.6-2.2l-0.7-2.1C99.3,94.9,99.3,94.8,99.4,94.6z"/>
		</g>
    <g id="_2214054079840">
			<path class="st7" d="M39.6,88.4c0,0,3,2.5,5.5,0.3c-0.6,2.7,0.5,5,3.1,5.7c-2.5,2.8,6.1,5.3,6.1,5.3c-5.2,0.6-7.3,1.7-6.9,4
				c-2,0.3-4.5,1.2-2.7,5.7c-2.5-1.8-4.5-2.2-6.2-0.7c-1.6-2.3-3.8-1.9-6.2,0.9c0.9-3.9,0.4-6.5-2.6-6.6c1.5-2.3,0-3.8-3.1-4.9
				c3.8-0.6,4.9-2.2,3.6-4.9c3-0.3,4.1-2,3-5.7C36.6,90.6,38.6,90.7,39.6,88.4z"/>
      <text transform="matrix(0.7109 0.7033 -0.7033 0.7109 32.9404 99.7093)" class="st8 st9 st10">Р</text>

      <rect x="36.6" y="96.6" transform="matrix(0.7033 -0.7109 0.7109 0.7033 -58.5428 55.4869)" class="st5" width="1.1" height="2.5"/>

      <rect x="36" y="97.7" transform="matrix(0.7033 -0.7109 0.7109 0.7033 -60.0739 55.5737)" class="st5" width="1.1" height="4.2"/>
		</g>
	</g>
</g>
</svg>

            </div>

        <div class="triangle-with-shadow"></div>
    </div>
</template>

<script>
    export default {
        name: 'App',
        props: ['activate'],
        data: function () {
            return {
                darkColor: '',
                icon: '',
                text: '',
                gift: null,
            };
        },
        watch: {
            activate: function (state) {
                if (state) {
                    this.rotateBaraban(state);
                    // генерируем событие 'twist' (не крутить)
                    this.$emit('deactivate', false);
                }
            },
        },
        methods: {
            rotateBaraban(state) {
                for (let i = 0; i <=3; i++ ) {
                    document.getElementById('cone-' + i).setAttribute("class", 'cone-' + i);
                }
                var random = 15 + Math.floor(Math.random() * 30),
                    angle = 72 * random;
                this.gift = random % 5;

                if (this.gift == 0) {
                  this.gift = this.gift + 2
                }

                switch(this.gift) {
                    case 0:
                        this.darkColor = '#b4735f';
                        this.icon = 'rub';
                        this.text = 'сертификат';
                        this.$store.commit('set_gift', 'Сертификат на услугу');
                        break;
                    case 1:
                        this.darkColor = '#328c96';
                        this.icon = 'service';
                        this.text = 'то-1';
                        this.$store.commit('set_gift', 'Cкидка 10% на плановый ТО');
                        break;
                    case 2:
                        this.darkColor = '#CE7D11';
                        this.icon = 'car';
                        this.text = 'осаго';
                        this.$store.commit('set_gift', '5% скидка на оригинальные запчасти');
                        break;
                    case 3:
                        this.darkColor = '#326482';
                        this.icon = 'shield';
                        this.text = 'каско';
                        this.$store.commit('set_gift', 'Каско в подарок');
                        break;
                    case 4:
                        this.darkColor = '#468c5a';
                        this.icon = 'sale';
                        this.text = '3 месяца оплаты % по кредиту';
                        this.$store.commit('set_gift', '3 месяца оплаты % по кредиту');
                        break;
                }

                if (state == true) {
                    let timer = setInterval(function() {
                        document.getElementById("baraban").style.WebkitTransitionDuration='2s';
                        document.getElementById("baraban").style.webkitTransform = 'rotate(' + angle + 'deg)';
                        clearInterval(timer);
                    });

                    setTimeout(() => { this.result() }, 2000);
                }
            },
            result() {
                document.getElementById('cone-' + this.gift).setAttribute("class", 'cone-' + this.gift + ' cone-dark-' + this.gift);
                this.$emit('gift', this.gift);
            }
        }
    }
</script>

<style lang="scss" scoped>
    .cone-0,
    .cone-1,
    .cone-2,
    .cone-3,
    .cone-4 {
        transition: fill 1s ease-out;
    }
    .cone-0{fill-rule:evenodd;clip-rule:evenodd;fill:#FF8351;}
    .cone-1{fill-rule:evenodd;clip-rule:evenodd;fill:#3CB6C5;}
    .cone-2{fill-rule:evenodd;clip-rule:evenodd;fill:#F6A720;}
    .cone-3{fill-rule:evenodd;clip-rule:evenodd;fill:#6B8CC5;}
    .cone-4{fill-rule:evenodd;clip-rule:evenodd;fill:#71B969;}
    .cone-dark-0{fill-rule:evenodd;clip-rule:evenodd;fill:#b4735f;}
    .cone-dark-1{fill-rule:evenodd;clip-rule:evenodd;fill:#328c96;}
    .cone-dark-2{fill-rule:evenodd;clip-rule:evenodd;fill:#CE7D11;}
    .cone-dark-3{fill-rule:evenodd;clip-rule:evenodd;fill:#326482;}
    .cone-dark-4{fill-rule:evenodd;clip-rule:evenodd;fill:#468c5a;}

    .st5{fill-rule:evenodd;clip-rule:evenodd;fill:#FEFEFE;}
    .st6{fill:#3CB6C5;}
    .st7{fill:none;stroke:#FEFEFE;stroke-width:0.7087;stroke-miterlimit:10;}
    .st8{fill:#FEFEFE;}
    .st10{font-size:13.5731px;}

    #baraban-image-rotation {
        transform: rotate(10deg);
    }

    .baraban-image {
        position: relative;

        .triangle-with-shadow {
            width: 85px;
            height: 100px;
            overflow: hidden;
            box-shadow: 3px 14px 10px -17px black;
            position: absolute;
            bottom: -20px;
            left: 0;
            right: 0;
            margin: 0 auto;

            &:after {
                content: '';
                position: absolute;
                width: 50px;
                height: 50px;
                background-color: #e7e7e7;
                transform: rotate(55deg) skewX(20deg);
                top: 80px;
                left: 0;
                right: 0;
                margin: 0 auto;
                box-shadow: 10px 2px 10px -2px black;
            }
        }
    }

    .rotation {
        animation-name: rotate;
        animation-duration: 2s;
        animation-fill-mode: both;
    }

    @keyframes rotate {
        0% {  transform: rotate(0deg); }
        100% { transform: rotate(720deg) }
    }
</style>
